<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html lang="en">
<head>
    <title id='Description'>Список постів</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1 minimum-scale=1" />

    <meta charset="utf-8">
    <!--CKEditor-->
    <script src="/myckeditor/source/ckeditor.js"></script>
    <script src="/myckeditor/source/samples/js/sample.js"></script>
    <link rel="stylesheet" href="/myckeditor/source/samples/css/samples.css">
    <link rel="stylesheet" href="/myckeditor/source/samples/toolbarconfigurator/lib/codemirror/neo.css">


    <!-- Favicon -->
    <link rel="icon" href="/img/core-img/favicon.ico">
    <!-- Core Stylesheet -->
    <link rel="stylesheet" href="/style.css">
</head>
<body id="main">
    <!-- ##### Header Area Start ##### -->
    <header class="header-area">
        <!--&lt;!&ndash; Top Header Area &ndash;&gt;-->
        <th:block th:include="/static/header_area"></th:block>
        <!--&lt;!&ndash; Navbar Area &ndash;&gt;-->
        <th:block th:include="/static/navbar_area"></th:block>
    </header>
    <!-- ##### Header Area End ##### -->

<!-- ##### Hero Area Start ##### -->
<div class="hero-area">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-12 col-lg-8">
                <!-- Breaking News Widget -->
                <th:block th:include="/static/hot_news"></th:block>
                <!-- Breaking News Widget -->
                <th:block th:include="/static/kyiv_news"></th:block>
            </div>

            <!-- Hero banner Add -->
            <!--<div class="ckeditor-html5-video" style="text-align: center;">-->
                <!--<video autoplay="autoplay" controls="controls" loop="loop" src="/upload/145/images/Toloka-intro.mp4">&nbsp;</video>-->
            <!--</div>-->
            <!-- Hero Add -->
            <!--===================================================================-->
            <div class="contact-area section-padding-0-80">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <div class="contact-title">
                                <div th:switch="${itemtype}">
                                    <div th:case="ROT">
                                        <h2>Реальне Оболонське телебачення</h2>
                                    </div>
                                    <div th:case="SiteArticle">
                                        <h2>Стаття</h2>
                                    </div>
                                    <div th:case="*">
                                        <h2>Щось пішло не так! Зверніться до адміністратора</h2>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12 col-lg-8">
                            <div class="contact-form-area">
                                <!--//=======================================================-->
                                <!--<form action="#" th:action="@{/user/item/save}" th:object="${items}" method="post">-->
                                <form action="#" th:action="@{/user/item/save}" th:object="${items}" method="post">
                                    <div class="row">
                                        <!--<input type="hidden" id="itemtype" th:field="*{itemtype.name}" name="itemtype">-->
                                        <!--<input type="hidden" id="itemstatus" th:field="*{itemstatus}" name="itemstatus">-->
                                        <!--<input type="hidden" id="categorys" th:field="*{categorys}" name="categorys">-->
<!--                                        <input type="hidden" id="tMainMedia" th:field="${tMainMedia}" name="tMainMedia">-->
<!--                                        <input type="hidden" id="titemtype" th:field="${titemtype}" name="titemtype">-->

                                        <hr>
                                        <div th:switch="${itemtype}">
                                            <div th:case="ROT">

                                                <div class="col-12 col-lg-6">
                                                    <input type="text" th:field="*{tTitle}" class="form-control" id="title" placeholder="Заголовок">
                                                </div>
                                                <div>
                                                    <textarea name="editor" th:utext="*{tIntro}" id="editor" class="form-control" cols="30" rows="10" placeholder="Коротенький опис"></textarea>
                                                </div>
                                                <button class="btn newspaper-btn mt-30 w-100" type="submit">Зберегти</button>
                                            </div>
                                            <div th:case="SiteArticle">
                                                <div class="col-12 col-lg-6">
                                                    <input type="text" th:field="*{tTitle}" class="form-control" id="title" placeholder="Заголовок">
                                                </div>
                                                <div>
                                                    <h4>Введіть короткий опис статті</h4>
                                                    <textarea name="textintro" th:utext="*{tIntro}" id="textintro" class="form-control" cols="30" rows="10" placeholder="Коротенький опис"></textarea>
                                                </div>
                                                <div>
                                                    <textarea name="tBody" th:utext="*{tBody}" id="editor" class="form-control" cols="30" rows="10" placeholder="Текст Вашої статті"></textarea>
                                                </div>
                                                <button class="btn newspaper-btn mt-30 w-100" type="submit">Зберегти</button>
                                            </div>
                                            <div th:case="*">
                                                Ви не можете редагувати цей тип статті.
                                            </div>
                                        </div>
                                        <hr>
                                        <!-- Тут була кнопка ЗБЕРЕГТИ для форми -->
                                        <hr>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
<!--=================================================================================================================-->
                    <div class="row">
                        <div class="col-12">
                            <div class="contact-title">
                                <div th:switch="${itemtype}">
                                    <div th:case="ROT">
                                        <div>
                                            <div>
                                                <input type="file" id="myFileField" name="myFile" />
                                            </div>
                                            <div>
                                                <button onclick="myFunction()">Завантажити відео</button>
                                            </div>
                                            <!-- показати завантажений файл -->
                                            <video src="/upload/static/Toloka-intro.mp4" id="mymedia" width="320" height="240" autoplay="autoplay" controls="controls" controlslist="nodownload"></video>
                                        </div>
                                    </div>
                                    <div th:case="SiteArticle">
                                        <div>
                                            <input type="file" id="myFileField" name="myFile" />
                                        </div>
                                        <div>
                                            <button onclick="myFunction()">Завантажити головне зображення</button>
                                        </div>
                                        <div>
                                            <!-- показати завантажений файл -->
                                            <img alt="" src="/upload/145/ROT-Kyiv.jpg" id="mymedia" style="width:200px" />
                                        </div>
                                        <div th:case="*">
                                            <h2></h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <script>
                        function myFunction() { // загружаем медиа для свернутого просмотра.
                                                // відео для РОТ та зображення для інших.
                            var formData = new FormData();
                            formData.append("upload", document.getElementById("myFileField").files[0]);
                            //formData.append("type",
                            var xmlhttp = new XMLHttpRequest();
                            var url = "/userupload";

                            xmlhttp.onreadystatechange = function() {
                                if (this.readyState == 4 && this.status == 200) {
                                    var myrespons = xmlhttp.responseText;
                                    obj = JSON.parse(xmlhttp.responseText);
                                    console.log(myrespons);
                                    document.getElementById("mymedia").src = obj.url; // url для відео чи зображення
                                    document.getElementById("tMainMedia").value = obj.url; // строка зі шляхом
                                }
                            };
                            xmlhttp.open("POST", url, true);
                            xmlhttp.send(formData);
                           }
                        </script>
<!--=================================================================================================================-->
                </div>
            </div>
        </div>
    </div>
</div>
    <main>

    </main>
<!-- ##### Footer Area Start ##### -->
<th:block th:include="/static/footer_area"></th:block>
<!-- ##### Footer Area Start ##### -->

<!-- ##### All Javascript Files ##### -->
<th:block th:include="/static/body_javascripts"></th:block>
<!-- ##### All Javascript Files ##### -->

    <script>
	    initSample();
    </script>

</body>
</html>